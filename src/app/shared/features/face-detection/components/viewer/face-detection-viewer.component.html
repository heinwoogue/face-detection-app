<div *ngIf="faceInput() || currentHistory()" class="my-2 border">
  @if (currentHistory()) {
    <p class="ms-3 mt-2 mb-0">
      Gender: {{currentHistory()!.faceDetectionResult.gender}}
      <br/>
      Age: {{currentHistory()!.faceDetectionResult.age}}
      <br/>
      Confidence: {{currentHistory()!.faceDetectionResult.confidence| truncateDecimals: 2}}%
    </p>
  }

  @if(faceInput() && currentHistory()) {
    <div class="d-flex justify-content-center align-items-center">
      <app-face-detection-drawer [imageUrl]="faceInput()!.base64Image" 
        [data]="currentHistory()!.faceDetectionResult"
        (scannedImageUrl)="updateCurrentHistoryImageUrl($event)">
      </app-face-detection-drawer>
    </div>
  } @else {
    <div class="d-flex justify-content-center align-items-center">
      <img [src]="currentHistory() ? currentHistory()!.base64Image : faceInput()?.base64Image" alt="Selected Image" />
    </div>
  }
</div>

@if((loading())) {
  <div class="mt-3 d-flex justify-content-center align-items-center">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <span class="d-inline-block ms-2">
      Scanning...
    </span>
  </div>
} @else {
  @if (errorMsg()) {
    <div class="alert alert-danger d-flex align-items-center" role="alert">
      <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="assets/sprites.svg#exclamation-triangle-fill"/></svg>
      <div>
        {{errorMsg()}}
      </div>
    </div>
  } @else if (successMsg()){
    <div *ngIf="successMsg()" class="alert alert-success d-flex align-items-center" role="alert">
      <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="assets/sprites.svg#exclamation-triangle-fill"/></svg>
      <div>
        {{successMsg()}}
      </div>
    </div>
  } @else if (faceInput() && !currentHistory()){
    <button class="btn btn-primary mt-2" (click)="scan()">
      Scan
    </button>
  }
}